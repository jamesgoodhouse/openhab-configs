// sync power state with what the fireplace is saying
rule "Fireplace — Sync Power State"
when
  Item Fireplace_State changed to ON
then
  if (Fireplace_Power.state == ON) {
    Fireplace_Power.sendCommand(OFF)
  }
end

// ensure it actually was turned on, otherwise set power to OFF
rule "Fireplace — Check Status After Turning On"
when
  Item Fireplace_Power changed to ON
then
  createTimer(now.plusSeconds(2), [ |
    if (Fireplace_State.state == OFF) {
      Fireplace_Power.sendCommand(OFF)
    }
  ])
end
